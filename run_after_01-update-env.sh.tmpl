#!/bin/bash

{{ if eq .osid "darwin" -}}

# update homebrew and installed formulae
brew upgrade

# Upgrade PyPI packages
pip3 install -U -r "${HOME}"/.config/pip/requirements.txt

{{ else if or (eq .osid "linux-debian") (eq .osid "linux-ubuntu") -}}

# Upgrade APT packages
sudo apt update && sudo apt full-upgrade -y && sudo apt autoremove --purge -y && sudo apt clean -y

# Upgrade Chezmoi
chezmoi upgrade

{{ end -}}

# update zsh plugins
antigen_dir="${HOME}/.antigen"
[[ -d "${antigen_dir}" ]] && rm -rf "${antigen_dir}"
mkdir -p "${antigen_dir}"
git clone https://github.com/zsh-users/antigen.git "${antigen_dir}"

# update vim plugins
#curl -fLo "${HOME}"/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
#vim -es -u "${HOME}"/.vimrc -i NONE -c "PlugInstall" -c "qa"
